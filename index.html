<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Special Question...</title>

<!-- AUDIO FILES -->
<audio id="audio1" loop>
    <source src="page1.mp3" type="audio/mpeg">
</audio>
<audio id="audio2" loop>
    <source src="page2.mp3" type="audio/mpeg">
</audio>
<audio id="audio3" loop>
    <source src="page3.mp3" type="audio/mpeg">
</audio>
<audio id="audio4" loop>
    <source src="page4.mp3" type="audio/mpeg">
</audio>
<audio id="audio5">
    <source src="celebration.mp3" type="audio/mpeg">
</audio>

<style>
/* Your existing CSS here */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Georgia', serif; overflow-x:hidden; background:#0f0f1e; }
.page { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:20px; position:relative; opacity:0; transition:opacity 1s ease; }
.page.active { opacity:1; }
.page.hidden { display:none; }
/* stars, page colors, animations, hearts, buttons, etc. */
</style>
</head>
<body>
<div class="stars" id="stars"></div>

<!-- PAGE 1 -->
<div id="page1" class="page active">
    <div class="welcome-content">
        <h1>Hey qt ğŸ’•</h1>
        <p>Made something for you</p>
        <button class="start-btn">ğŸ‘€</button>
    </div>
</div>

<!-- PAGE 2 -->
<div id="page2" class="page">
    <div class="distance-content">
        <div class="globe"></div>
        <h2>Two Islands ğŸï¸</h2>
        <div class="connecting-line"></div>
        <div style="margin:30px 0;">
            <img id="meme2" style="max-width:300px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3);" alt="Long distance meme">
        </div>
        <p>Different time zones... But you're always on my mind ğŸ’­</p>
        <button class="start-btn">â†’</button>
    </div>
</div>

<!-- PAGE 3 -->
<div id="page3" class="page">
    <div class="hearts-content">
        <h2>Why I like you ğŸ˜</h2>
        <div style="margin:20px 0;">
            <img id="meme3" style="max-width:250px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3);" alt="Feelings meme">
        </div>
        <p>Click the hearts ğŸ‘‡</p>
        <div class="heart-container">
            <div class="heart" onclick="clickHeart(this)" title="Your smile â˜€ï¸">â¤ï¸</div>
            <div class="heart" onclick="clickHeart(this)" title="The way you dance ğŸ’ƒ">ğŸ’–</div>
            <div class="heart" onclick="clickHeart(this)" title="Your laugh ğŸµ">ğŸ’•</div>
            <div class="heart" onclick="clickHeart(this)" title="Your cooking ğŸ½ï¸">ğŸ’—</div>
            <div class="heart" onclick="clickHeart(this)" title="You get my jokes ğŸ—£ï¸">ğŸ’“</div>
            <div class="heart" onclick="clickHeart(this)" title="Everything about you ğŸŒ…">ğŸ’</div>
        </div>
        <button class="next-btn" id="nextBtn" onclick="goToPage(4)">â†’</button>
    </div>
</div>

<!-- PAGE 4 -->
<div id="page4" class="page">
    <div class="question-content">
        <div class="big-heart">ğŸ’–</div>
        <div style="margin:20px 0;">
            <img id="meme4" style="max-width:300px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3);" alt="Asking out meme">
        </div>
        <h2>Â¿Quieres ser mi Valentine?</h2>
        <p class="message">So... what do you say? ğŸ˜</p>
        <div class="answer-buttons">
            <button class="yes-btn" onclick="sayYes()">SÃ! ğŸ’•</button>
            <button class="no-btn" onmouseover="runAway(this)" onclick="runAway(this)">No</button>
        </div>
    </div>
</div>

<!-- PAGE 5 -->
<div id="page5" class="page">
    <div class="celebration-content">
        <h2>ğŸ‰ WEPAAA! ğŸ‰</h2>
        <p>Â¡You just made me the happiest man alive! ğŸ˜</p>
        <div style="margin:30px 0;">
            <img id="meme5" style="max-width:350px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.3);" alt="Celebration meme">
        </div>
    </div>
</div>

<script>
// ===== STARS =====
function createStars() {
    const starsContainer = document.getElementById('stars');
    for(let i=0;i<100;i++){
        const star = document.createElement('div');
        star.className='star';
        star.style.width = Math.random()*3+'px';
        star.style.height = star.style.width;
        star.style.left = Math.random()*100+'%';
        star.style.top = Math.random()*100+'%';
        star.style.animationDelay = Math.random()*3+'s';
        starsContainer.appendChild(star);
    }
}

// ===== AUDIO HANDLING =====
let userInteracted = false;

// Attach first click event for starting audio
document.querySelectorAll('.start-btn').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
        if(!userInteracted){
            userInteracted = true;
            const page1Audio = document.getElementById('audio1');
            if(page1Audio) page1Audio.play().catch(err=>console.log(err));
        }
        // Determine which page to go next
        const currentPage = e.target.closest('.page');
        if(currentPage.id==='page1') goToPage(2);
        else if(currentPage.id==='page2') goToPage(3);
    });
});

// Go to page function
function goToPage(pageNum){
    const pages = document.querySelectorAll('.page');
    // Stop all audio
    for(let i=1;i<=5;i++){
        const audio = document.getElementById(`audio${i}`);
        if(audio){ audio.pause(); audio.currentTime=0; }
    }

    pages.forEach(p=>p.classList.remove('active'));
    setTimeout(()=>{
        pages.forEach(p=>p.classList.add('hidden'));
        const targetPage = document.getElementById(`page${pageNum}`);
        targetPage.classList.remove('hidden');
        setTimeout(()=>{
            targetPage.classList.add('active');
            // Play audio if user interacted
            const audio = document.getElementById(`audio${pageNum}`);
            if(audio && audio.src && userInteracted){
                audio.play().catch(err=>console.log('Audio play failed:', err));
            }
        },50);
    },1000);
}

// ===== HEARTS =====
let clickedHearts=0;
function clickHeart(h){
    if(!h.classList.contains('clicked')){
        h.classList.add('clicked');
        clickedHearts++;
        if(clickedHearts===6){
            document.getElementById('nextBtn').classList.add('visible');
        }
    }
}

// ===== NO BUTTON =====
let noButtonMoved=false;
function runAway(btn){
    const maxX = window.innerWidth - btn.offsetWidth - 50;
    const maxY = window.innerHeight - btn.offsetHeight - 50;
    const randomX = Math.max(50, Math.random()*maxX);
    const randomY = Math.max(50, Math.random()*maxY);
    btn.style.position='fixed';
    btn.style.left=randomX+'px';
    btn.style.top=randomY+'px';
    btn.style.transition='all 0.2s ease';
    if(!noButtonMoved){ noButtonMoved=true; btn.textContent="No? ğŸ¤¨"; }
    else{ btn.style.fontSize='0.8em'; btn.style.padding='8px 20px'; btn.textContent="Segura? ğŸ¥º"; }
}

// ===== YES BUTTON =====
function sayYes(){
    for(let i=1;i<=4;i++){
        const audio = document.getElementById(`audio${i}`);
        if(audio){ audio.pause(); audio.currentTime=0; }
    }
    const celebrationAudio = document.getElementById('audio5');
    if(celebrationAudio && userInteracted) celebrationAudio.play().catch(err=>console.log(err));
    document.getElementById('page5').style.display='flex';
    goToPage(5);
    createConfetti();
}

// ===== CONFETTI =====
function createConfetti(){
    const colors=['#ff6e7f','#bfe9ff','#ffecd2','#fcb69f','#fa709a','#fee140'];
    for(let i=0;i<100;i++){
        setTimeout(()=>{
            const confetti=document.createElement('div');
            confetti.style.position='fixed';
            confetti.style.width='10px';
            confetti.style.height='10px';
            confetti.style.background=colors[Math.floor(Math.random()*colors.length)];
            confetti.style.left=Math.random()*100+'%';
            confetti.style.top='-10px';
            confetti.style.borderRadius = Math.random()>0.5?'50%':'0';
            confetti.style.animation=`confetti-fall ${2+Math.random()*2}s linear forwards`;
            confetti.style.zIndex='1000';
            document.body.appendChild(confetti);
            setTimeout(()=>confetti.remove(),4000);
        }, i*30);
    }
}

// ===== INIT =====
createStars();

// ===== MEMES (replace with your URLs) =====
document.getElementById('meme2').src='bad_b.jpg';
document.getElementById('meme3').src='feelings_meme.jpg';
document.getElementById('meme4').src='asking_meme.jpg';
document.getElementById('meme5').src='celebration_meme.jpg';
</script>
</body>
</html>
